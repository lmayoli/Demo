{%extends "base.html" %}
{% block title %} {{name}} {% endblock %}

{% block content %}
    {% with messages = get_flashed_messages() %}
        {% if messages %}
            {% for msg in messages %}
                <p>{{msg}}</p>
            {%endfor%}
        {% endif%}
    {% endwith %}
    <br>
    <br>
    <br>
    <br>
    <br>
    <br>
<form action= "#" method = "POST">
    <p>Number:</p>
    <input type="number" name="number" placeholder = "Enter Phone number" value= "{{number if number}}" />
    <input type="submit" value="submit"/>
</form>

<div id="app">
    <h3>Create an Account</h3>
    <div><input id="qr-text" type="text" placeholder="Account Name:"/></div>
    <br/>
    <div>
        <button class="btn btn-lg btn-secondary fw-bold border-white bg-white" onclick="generateQRCode(),randomString(), myFunction()">Create New ID</button>
    </div>
    <br/>
    <p id="qr-result">This is default QR code:</p>
    <canvas id="qr-code"></canvas>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js"></script>
    <script>
        /* JS comes here */
        var qr;
        (function() {
                qr = new QRious({
                element: document.getElementById('qr-code'),
                size: 200,
                value: 'https://crowdedcap.com'
            });
        })();
        
        function generateQRCode() {
            var qrtext = document.getElementById("qr-text").value;
            document.getElementById("qr-result").innerHTML = "QR code for " + qrtext +":";
            
            qr.set({
                foreground: 'black',
                size: 200,
                value: qrtext
            });
        }
  
  
        function randomString() {  
            //define a variable consisting alphabets in small and capital letter  
    var characters = "ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz12345678910";  
              
            //specify the length for the new string  
    var lenString = 17;  
    var randomstring = '';  
  
            //loop to select a new character in each iteration  
    for (var i=0; i<lenString; i++) {  
        var rnum = Math.floor(Math.random() * characters.length);  
        randomstring += characters.substring(rnum, rnum+1);  
    }  
  
             //display the generated string   
    document.getElementById("randomfield").innerHTML = randomstring;  
  }  
    </script>
  
    <form name="randomform">  
        <br><br>  
        <p>New Account Public Key:</p>
        <b><p id="randomfield" style="color: green"> </p></b>  
        </form>  

{% endblock %}